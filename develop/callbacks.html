

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Callbacks &mdash; QuCumber develop documentation</title>
  

  
  
  
  
    <link rel="canonical" href="http://piquil.github.io/QuCumber/master/callbacks.html"/>
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Observables" href="observables.html" />
    <link rel="prev" title="Quantum Reconstruction" href="quantum_reconstruction.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> QuCumber
          

          
          </a>

          
            
            
              <div class="version">
                develop
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Download the tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="_examples/tutorial_quantum_ising.html">Part 1: Reconstruction of a positive wavefunction</a></li>
<li class="toctree-l1"><a class="reference internal" href="_examples/tutorial_qubits.html">Part 2: Training an RBM <em>with</em> a phase</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="rbm.html">RBM</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantum_states.html">Quantum States</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantum_reconstruction.html">Quantum Reconstruction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Callbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="observables.html">Observables</a></li>
<li class="toctree-l1"><a class="reference internal" href="cplx.html">Complex Algebra</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Data Handler</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">QuCumber</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Callbacks</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/callbacks.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="callbacks">
<h1>Callbacks<a class="headerlink" href="#callbacks" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="qucumber.callbacks.callback.Callback">
<em class="property">class </em><code class="descclassname">qucumber.callbacks.callback.</code><code class="descname">Callback</code><a class="reference external" href="https://github.com/PIQuIL/QuCumber/blob/2699511/qucumber/callbacks/callback.py#L21"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qucumber.callbacks.callback.Callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for callbacks.</p>
<dl class="method">
<dt id="qucumber.callbacks.callback.Callback.on_train_start">
<code class="descname">on_train_start</code><span class="sig-paren">(</span><em>rbm</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/PIQuIL/QuCumber/blob/2699511/qucumber/callbacks/callback.py#L24"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qucumber.callbacks.callback.Callback.on_train_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Called at the start of the training cycle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rbm</strong> (<em>BinomialRBM</em>) – The RBM being trained.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="qucumber.callbacks.callback.Callback.on_train_end">
<code class="descname">on_train_end</code><span class="sig-paren">(</span><em>rbm</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/PIQuIL/QuCumber/blob/2699511/qucumber/callbacks/callback.py#L32"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qucumber.callbacks.callback.Callback.on_train_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Called at the end of the training cycle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rbm</strong> (<em>BinomialRBM</em>) – The RBM being trained.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="qucumber.callbacks.callback.Callback.on_epoch_start">
<code class="descname">on_epoch_start</code><span class="sig-paren">(</span><em>rbm</em>, <em>epoch</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/PIQuIL/QuCumber/blob/2699511/qucumber/callbacks/callback.py#L40"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qucumber.callbacks.callback.Callback.on_epoch_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Called at the start of each epoch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rbm</strong> (<em>BinomialRBM</em>) – The RBM being trained.</li>
<li><strong>epoch</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The current epoch.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="qucumber.callbacks.callback.Callback.on_epoch_end">
<code class="descname">on_epoch_end</code><span class="sig-paren">(</span><em>rbm</em>, <em>epoch</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/PIQuIL/QuCumber/blob/2699511/qucumber/callbacks/callback.py#L50"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qucumber.callbacks.callback.Callback.on_epoch_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Called at the end of each epoch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rbm</strong> (<em>BinomialRBM</em>) – The RBM being trained.</li>
<li><strong>epoch</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The current epoch.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="qucumber.callbacks.callback.Callback.on_batch_start">
<code class="descname">on_batch_start</code><span class="sig-paren">(</span><em>rbm</em>, <em>epoch</em>, <em>batch</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/PIQuIL/QuCumber/blob/2699511/qucumber/callbacks/callback.py#L60"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qucumber.callbacks.callback.Callback.on_batch_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Called at the start of each batch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rbm</strong> (<em>BinomialRBM</em>) – The RBM being trained.</li>
<li><strong>epoch</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The current epoch.</li>
<li><strong>batch</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The current batch index.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="qucumber.callbacks.callback.Callback.on_batch_end">
<code class="descname">on_batch_end</code><span class="sig-paren">(</span><em>rbm</em>, <em>epoch</em>, <em>batch</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/PIQuIL/QuCumber/blob/2699511/qucumber/callbacks/callback.py#L72"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qucumber.callbacks.callback.Callback.on_batch_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Called at the end of each batch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rbm</strong> (<em>BinomialRBM</em>) – The RBM being trained.</li>
<li><strong>epoch</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The current epoch.</li>
<li><strong>batch</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The current batch index.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="qucumber.callbacks.lambda_callback.LambdaCallback">
<em class="property">class </em><code class="descclassname">qucumber.callbacks.lambda_callback.</code><code class="descname">LambdaCallback</code><span class="sig-paren">(</span><em>on_train_start=None</em>, <em>on_train_end=None</em>, <em>on_epoch_start=None</em>, <em>on_epoch_end=None</em>, <em>on_batch_start=None</em>, <em>on_batch_end=None</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/PIQuIL/QuCumber/blob/2699511/qucumber/callbacks/lambda_callback.py#L25"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qucumber.callbacks.lambda_callback.LambdaCallback" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for creating simple callbacks.</p>
<p>This callback is constructed using the passed functions that will be called
at the appropriate time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>on_train_start</strong> (<em>callable</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – A function to be called at the start of the training
cycle. Must follow the same signature as
<code class="xref py py-func docutils literal notranslate"><span class="pre">Callback.on_train_start</span></code>.</li>
<li><strong>on_train_end</strong> (<em>callable</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – A function to be called at the end of the training
cycle. Must follow the same signature as
<code class="xref py py-func docutils literal notranslate"><span class="pre">Callback.on_train_end</span></code>.</li>
<li><strong>on_epoch_start</strong> (<em>callable</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – A function to be called at the start of every epoch.
Must follow the same signature as
<code class="xref py py-func docutils literal notranslate"><span class="pre">Callback.on_epoch_start</span></code>.</li>
<li><strong>on_epoch_end</strong> (<em>callable</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – A function to be called at the end of every epoch.
Must follow the same signature as
<code class="xref py py-func docutils literal notranslate"><span class="pre">Callback.on_epoch_end</span></code>.</li>
<li><strong>on_batch_start</strong> (<em>callable</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – A function to be called at the start of every batch.
Must follow the same signature as
<code class="xref py py-func docutils literal notranslate"><span class="pre">Callback.on_batch_start</span></code>.</li>
<li><strong>on_batch_end</strong> (<em>callable</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – A function to be called at the end of every batch.
Must follow the same signature as
<code class="xref py py-func docutils literal notranslate"><span class="pre">Callback.on_batch_end</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="qucumber.callbacks.model_saver.ModelSaver">
<em class="property">class </em><code class="descclassname">qucumber.callbacks.model_saver.</code><code class="descname">ModelSaver</code><span class="sig-paren">(</span><em>period</em>, <em>folder_path</em>, <em>file_name</em>, <em>save_initial=True</em>, <em>metadata=None</em>, <em>metadata_only=False</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/PIQuIL/QuCumber/blob/2699511/qucumber/callbacks/model_saver.py#L28"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qucumber.callbacks.model_saver.ModelSaver" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback which allows model parameters (along with some metadata)
to be saved to disk at regular intervals.</p>
<p>This Callback is called at the end of each epoch. If <cite>save_initial</cite> is
<cite>True</cite>, will also be called at the start of the training cycle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>period</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Frequency of model saving (in epochs).</li>
<li><strong>folder_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The directory in which to save the files</li>
<li><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the output files. Should be a format string
with one blank, which will be filled with either the
epoch number or the word “initial”.</li>
<li><strong>save_initial</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether to save the initial parameters (and metadata).</li>
<li><strong>metadata</strong> (<em>callable</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – The metadata to save to disk with the model parameters
Can be either a function or a dictionary. In the case of a
function, it must take 2 arguments the RBM being trained,
and the current epoch number, and then return a dictionary
containing the metadata to be saved.</li>
<li><strong>metadata_only</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether to save <em>only</em> the metadata to disk.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="qucumber.callbacks.logger.Logger">
<em class="property">class </em><code class="descclassname">qucumber.callbacks.logger.</code><code class="descname">Logger</code><span class="sig-paren">(</span><em>period</em>, <em>logger_fn=&lt;built-in function print&gt;</em>, <em>msg_gen=None</em>, <em>**msg_gen_kwargs</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/PIQuIL/QuCumber/blob/2699511/qucumber/callbacks/logger.py#L24"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qucumber.callbacks.logger.Logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback which logs output at regular intervals.</p>
<p>This Callback is called at the end of each epoch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>period</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Logging frequency (in epochs).</li>
<li><strong>logger_fn</strong> (<em>callable</em>) – The function used for logging. Must take 1 string as
an argument. Defaults to the standard <cite>print</cite> function.</li>
<li><strong>msg_gen</strong> (<em>callable</em>) – A callable which generates the string to be logged.
Must take 2 positional arguments: the RBM being trained and
the current epoch. It must also be able to take some
keyword arguments.</li>
<li><strong>**kwargs</strong> – Keyword arguments which will be passed to <cite>msg_gen</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="qucumber.callbacks.early_stopping.EarlyStopping">
<em class="property">class </em><code class="descclassname">qucumber.callbacks.early_stopping.</code><code class="descname">EarlyStopping</code><span class="sig-paren">(</span><em>period</em>, <em>tolerance</em>, <em>patience</em>, <em>metric_callback</em>, <em>metric_name</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/PIQuIL/QuCumber/blob/2699511/qucumber/callbacks/early_stopping.py#L24"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qucumber.callbacks.early_stopping.EarlyStopping" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop training once the model stops improving.
The specific criterion for stopping is:</p>
<div class="math">
<p><img src="_images/math/21c4f76645c95ef00bc97fb7cac025ce41376f20.svg" alt="\left\vert\frac{M_{t-p} - M_t}{M_{t-p}}\right\vert &lt; \epsilon"/></p>
</div><p>where <img class="math" src="_images/math/e97ee25ef2c0a46b13c3bd5bfeed915e9047d590.svg" alt="M_t"/> is the metric value at the current evaluation
(time <img class="math" src="_images/math/f8f8190633e5b81d2cbdb7ffd2540f61c4fe6d37.svg" alt="t"/>), <img class="math" src="_images/math/da513790a4c733b2a5762181bfcd8f64ace3bf03.svg" alt="p"/> is the “patience” parameter, and
<img class="math" src="_images/math/a14a17eebcb72aad21275e6905a40599850036d2.svg" alt="\epsilon"/> is the tolerance.</p>
<p>This Callback is called at the end of each epoch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>period</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Frequency with which the callback checks whether training
has converged (in epochs).</li>
<li><strong>tolerance</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum relative change required to consider training
as having converged.</li>
<li><strong>patience</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – How many intervals to wait before claiming the training
has converged.</li>
<li><strong>metric_callback</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">MetricEvaluator</span></code>) – An instance of
<code class="xref py py-class docutils literal notranslate"><span class="pre">MetricEvaluator</span></code> which computes the metric
that we want to check for convergence.</li>
<li><strong>metric_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the metric stored in <cite>metric_callback</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="qucumber.callbacks.variance_based_early_stopping.VarianceBasedEarlyStopping">
<em class="property">class </em><code class="descclassname">qucumber.callbacks.variance_based_early_stopping.</code><code class="descname">VarianceBasedEarlyStopping</code><span class="sig-paren">(</span><em>period</em>, <em>tolerance</em>, <em>patience</em>, <em>metric_callback</em>, <em>metric_name</em>, <em>variance_name</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/PIQuIL/QuCumber/blob/2699511/qucumber/callbacks/variance_based_early_stopping.py#L26"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qucumber.callbacks.variance_based_early_stopping.VarianceBasedEarlyStopping" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop training once the model stops improving. This is a variation
on the <code class="xref py py-class docutils literal notranslate"><span class="pre">EarlyStopping</span></code> class which takes the variance
of the metric into account.
The specific criterion for stopping is:</p>
<div class="math">
<p><img src="_images/math/7f8ca591cc62202ecc6239b33b50c8b15c82b49a.svg" alt="\left\vert\frac{M_{t-p} - M_t}{\sigma_{t-p}}\right\vert &lt; \kappa"/></p>
</div><p>where <img class="math" src="_images/math/e97ee25ef2c0a46b13c3bd5bfeed915e9047d590.svg" alt="M_t"/> is the metric value at the current evaluation
(time <img class="math" src="_images/math/f8f8190633e5b81d2cbdb7ffd2540f61c4fe6d37.svg" alt="t"/>), <img class="math" src="_images/math/da513790a4c733b2a5762181bfcd8f64ace3bf03.svg" alt="p"/> is the “patience” parameter,
<img class="math" src="_images/math/bc7b5fd484087ceb53429cf322cac924133ca639.svg" alt="\sigma_t"/> is the variance of the metric, and
<img class="math" src="_images/math/5a417db233bb2da8c422691cb5c35aa7ea5cb979.svg" alt="\kappa"/> is the tolerance.</p>
<p>This Callback is called at the end of each epoch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>period</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Frequency with which the callback checks whether training
has converged (in epochs).</li>
<li><strong>tolerance</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum (standardized) change required to consider
training as having converged.</li>
<li><strong>patience</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – How many intervals to wait before claiming the training
has converged.</li>
<li><strong>metric_callback</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">MetricEvaluator</span></code>) – An instance of
<code class="xref py py-class docutils literal notranslate"><span class="pre">MetricEvaluator</span></code> which computes the metric
that we want to check for convergence.</li>
<li><strong>metric_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the metric stored in <cite>metric_callback</cite>.</li>
<li><strong>variance_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the variance stored in <cite>metric_callback</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="qucumber.callbacks.metric_evaluator.MetricEvaluator">
<em class="property">class </em><code class="descclassname">qucumber.callbacks.metric_evaluator.</code><code class="descname">MetricEvaluator</code><span class="sig-paren">(</span><em>period</em>, <em>metrics</em>, <em>verbose=False</em>, <em>**metric_kwargs</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/PIQuIL/QuCumber/blob/2699511/qucumber/callbacks/metric_evaluator.py#L23"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qucumber.callbacks.metric_evaluator.MetricEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate and hold on to the results of the given metric(s).</p>
<p>This Callback is called at the end of each epoch.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since Callbacks are given to <code class="xref py py-func docutils literal notranslate"><span class="pre">fit</span></code>
as a list, they will be called in a deterministic order. It is
therefore recommended that instances of
<a class="reference internal" href="#qucumber.callbacks.metric_evaluator.MetricEvaluator" title="qucumber.callbacks.metric_evaluator.MetricEvaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetricEvaluator</span></code></a> be the first callbacks in
the list passed to <code class="xref py py-func docutils literal notranslate"><span class="pre">fit</span></code>,
as one would often use it in conjunction with other callbacks like
<code class="xref py py-class docutils literal notranslate"><span class="pre">EarlyStopping</span></code> which may depend on
<a class="reference internal" href="#qucumber.callbacks.metric_evaluator.MetricEvaluator" title="qucumber.callbacks.metric_evaluator.MetricEvaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetricEvaluator</span></code></a> having been called.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>period</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Frequency with which the callback evaluates the given
metric(s).</li>
<li><strong>metrics</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>callable</em><em>)</em>) – A dictionary of callables where the keys are the names of
the metrics and the callables take the RBM being trained
as their positional argument, along with some keyword
arguments. The metrics are evaluated and put into a
dictionary structure resembling the structure of <cite>metrics</cite>.
If one of the callables returns a dictionary,
the keys of that dictionary will be suitably modified
and will be merged with the metric dictionary.</li>
<li><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether to print metrics to stdout.</li>
<li><strong>**metric_kwargs</strong> – Keyword arguments to be passed to <cite>metrics</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="qucumber.callbacks.metric_evaluator.MetricEvaluator.__len__">
<code class="descname">__len__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/PIQuIL/QuCumber/blob/2699511/qucumber/callbacks/metric_evaluator.py#L62"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qucumber.callbacks.metric_evaluator.MetricEvaluator.__len__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of timesteps that metrics have been evaluated for.</p>
</dd></dl>

<dl class="method">
<dt id="qucumber.callbacks.metric_evaluator.MetricEvaluator.get_value">
<code class="descname">get_value</code><span class="sig-paren">(</span><em>name</em>, <em>index=None</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/PIQuIL/QuCumber/blob/2699511/qucumber/callbacks/metric_evaluator.py#L67"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qucumber.callbacks.metric_evaluator.MetricEvaluator.get_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the value of the desired metric from the given timestep.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the metric to retrieve.</li>
<li><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – The index/timestep from which to retrieve the metric.
Negative indices are supported. If None, will just get
the most recent value.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="qucumber.callbacks.liveplotting.LivePlotting">
<em class="property">class </em><code class="descclassname">qucumber.callbacks.liveplotting.</code><code class="descname">LivePlotting</code><span class="sig-paren">(</span><em>period</em>, <em>metric_evaluator</em>, <em>metric_name</em>, <em>error_name=None</em>, <em>total_epochs=None</em>, <em>smooth=True</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/PIQuIL/QuCumber/blob/2699511/qucumber/callbacks/liveplotting.py#L29"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qucumber.callbacks.liveplotting.LivePlotting" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots metrics.
This Callback is called at the end of each epoch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>period</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Frequency with which the callback updates the plots
(in epochs).</li>
<li><strong>metric_callback</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">MetricEvaluator</span></code>) – An instance of
<code class="xref py py-class docutils literal notranslate"><span class="pre">MetricEvaluator</span></code> which computes the metric
that we want to check for convergence.</li>
<li><strong>metric_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the metric stored in <cite>metric_callback</cite>.</li>
<li><strong>error_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the error stored in <cite>metric_callback</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="observables.html" class="btn btn-neutral float-right" title="Observables" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="quantum_reconstruction.html" class="btn btn-neutral" title="Quantum Reconstruction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, PIQuIL.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
    <h1>QuCumber Documentation</h1>
    <h2>Versions:</h2>
    <ul>
    
    </ul>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'develop',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>